<!DOCTYPE html>
<html>
<head>
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ö–∞—Å–º–∞–ª–∏–Ω—Å–∫–∞</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .panel { background: #2c3e50; color: white; padding: 20px; border-radius: 10px; max-width: 800px; margin: auto; }
        input, textarea { width: 100%; padding: 10px; margin: 5px 0; }
        button { background: #e74c3c; color: white; border: none; padding: 10px 20px; margin: 5px; cursor: pointer; }
        .news-item { background: white; color: black; padding: 10px; margin: 5px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="panel">
        <h1>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ö–∞—Å–º–∞–ª–∏–Ω—Å–∫–∞</h1>
        <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—â–µ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞</p>
        
        <div id="loginSection">
            <h3>üîê –í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
            <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
            <button onclick="login()">–í–æ–π—Ç–∏</button>
        </div>
        
        <div id="adminPanel" style="display:none">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏</h2>
            <input type="text" id="newsTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏">
            <textarea id="newsContent" placeholder="–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏" rows="4"></textarea>
            <select id="newsCategory">
                <option value="city_events">–°–æ–±—ã—Ç–∏—è –≥–æ—Ä–æ–¥–∞</option>
                <option value="economy">–≠–∫–æ–Ω–æ–º–∏–∫–∞</option>
                <option value="culture">–ö—É–ª—å—Ç—É—Ä–∞</option>
            </select>
            <button onclick="addNews()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
            
            <h3>–¢–µ–∫—É—â–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:</h3>
            <div id="newsList"></div>
            
            <button onclick="saveToGitHub()" style="background:#27ae60;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ GitHub</button>
        </div>
    </div>

<script>
const ADMIN_PASSWORD = "kasmainsk2023";
let database = { news: [], services: [], users: [] };

// URL –≤–∞—à–µ–≥–æ JSON —Ñ–∞–π–ª–∞ –Ω–∞ GitHub
const GITHUB_JSON_URL = "https://–≤–∞—à-–Ω–∏–∫.github.io/kasmainsk-database/database.json";

async function login() {
    if (document.getElementById('password').value === ADMIN_PASSWORD) {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('adminPanel').style.display = 'block';
        await loadDatabase();
    } else {
        alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
    }
}

async function loadDatabase() {
    try {
        const response = await fetch(GITHUB_JSON_URL);
        database = await response.json();
        showNews();
        console.log('‚úÖ –ë–∞–∑–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    } catch (error) {
        console.log('‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É');
        database = {
            news: [],
            services: [],
            users: []
        };
    }
}

function addNews() {
    const news = {
        id: Date.now(),
        title: document.getElementById('newsTitle').value,
        content: document.getElementById('newsContent').value,
        category: document.getElementById('newsCategory').value,
        date: new Date().toLocaleDateString('ru-RU'),
        views: 0,
        likes: 0
    };
    
    database.news.unshift(news);
    showNews();
    
    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
    document.getElementById('newsTitle').value = '';
    document.getElementById('newsContent').value = '';
}

function showNews() {
    const list = document.getElementById('newsList');
    let html = '';
    
    database.news.forEach(item => {
        html += `
            <div class="news-item">
                <strong>${item.title}</strong><br>
                <small>${item.date} | ${item.category}</small><br>
                ${item.content.substring(0, 100)}...
                <button onclick="deleteNews(${item.id})" style="float:right">üóëÔ∏è</button>
            </div>
        `;
    });
    
    list.innerHTML = html || '–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç';
}

function deleteNews(id) {
    database.news = database.news.filter(item => item.id !== id);
    showNews();
}

// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Pages
async function saveToGitHub() {
    alert('–§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ GitHub –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.');
    console.log('–î–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', database);
    
    // –°–æ–∑–¥–∞–µ–º JSON —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    const dataStr = JSON.stringify(database, null, 2);
    const blob = new Blob([dataStr], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = 'kasmainsk_database.json';
    a.click();
    
    alert('‚úÖ JSON —Ñ–∞–π–ª —Å–∫–∞—á–∞–Ω. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub.');
}
</script>
</body>
</html>